
sh ./cluster-autoscaler-permission-generator.sh cluster_name="cps-hcl-aks-workshop1" resource_group="jenkins_workshop"

kubectl get nodes -o json | jq '.items[0].metadata.labels.agentpool'

helm install --dry-run --debug ./aks-cluster-autoscaler --set nodes.min=5,nodes.max=10,nodes.agentpool=test1

bash cluster-autoscaler.sh


helm install ./aks-cluster-autoscaler --set rbac.create=false

helm install --dry-run --debug ./aks-cluster-autoscaler


bash cluster-autoscaler-using-sed.sh cluster_name="cps-hcl-aks-workshop5" resource_group="jenkins_workshop5" min_nodes=5 max_nodes=10


bash ca-permission-generator.sh cluster_name="cps-hcl-aks-workshop5" resource_group="jenkins_workshop5" >
../cluster-autoscaler/aks-cluster-autoscaler-sed/ca-secret.yaml


---------------------------

kubectl get nodes

kubectl -n kube-system describe configmap cluster-autoscaler-status

ssh ubuntu@13.95.2.38



helm install --name jenkins5 -f ingress-values.yaml stable/jenkins --namespace jenkins




cluster_name="cps-hcl-aks-workshop5" resource_group="jenkins_workshop5" min_nodes="5" max_nodes="10"


bash ca-permission-generator.sh cluster_name="cps-hcl-aks-workshop5" resource_group="jenkins_workshop5" min_nodes="5" max_nodes="10" > ./cluster-autoscaler/aks-cluster-autoscaler-sed/ca-secret.yaml



bash ca-permission-generator.sh cluster_name="cps-hcl-aks-workshop5" resource_group="jenkins_workshop5" min_nodes="5" max_nodes="10" > ./cluster-autoscaler/aks-cluster-autoscaler-helm/template/ca-secret.yaml



helm install ./cluster-autoscaler/aks-cluster-autoscaler-sed --set nodes.min=5,nodes.max=10,nodes.agentpool=default,image.repository=k8s.gcr.io/cluster-autoscaler,image.tag=v1.2.2 --set rbac.create=false --set serviceAccount.create=false

kubectl delete secret cluster-autoscaler-azure -n kube-system

kubectl delete serviceaccounts cluster-autoscaler -n kube-system


helm install ./cluster-autoscaler/aks-cluster-autoscaler-helm --set nodes.min=5,nodes.max=10,nodes.agentpool=default,image.repository=k8s.gcr.io/cluster-autoscaler,image.tag=v1.2.2 --set rbac.create=false --set serviceAccount.create=false --set rbac.createRole=false --set rbac.createClusterRole=false
